//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Project "Im Legal" {
  database_type: 'PostgreSQL'
  Note: 'test description'
}

Table Area {
  id Int [pk, increment]
  created_at DateTime [default: `now()`, not null]
  updated_at DateTime [not null]
  practicesIds Practice [not null]
  CategoryTranslation CategoryTranslation [not null]
}

Table Practice {
  id Int [pk, increment]
  created_at DateTime [default: `now()`, not null]
  updated_at DateTime [not null]
  tag Tag [not null]
  areasId Area [not null]
  servicesIds Service [not null]
  CategoryTranslation CategoryTranslation [not null]
}

Table Tag {
  id Int [pk, increment]
  tag_ru String [unique, not null]
  tag_en String [unique, not null]
  practice Practice [not null]
  practiceId Int [unique, not null]
  contentItemProfile ContentItem [not null]
}

Table Service {
  id Int [pk, increment]
  created_at DateTime [default: `now()`, not null]
  updated_at DateTime [not null]
  practicesIds Practice [not null]
  CategoryTranslation CategoryTranslation [not null]
}

Table Photo {
  id Int [pk, increment]
  type PhotoType [not null]
  fileName String [not null]
  size Int [not null]
  mimetype String [not null]
  originalName String [not null]
  created_at DateTime [default: `now()`, not null]
  updated_at DateTime [not null]
  contentItem ContentItem
  contentItemId Int
  person Person
  personId Int [unique]
}

Table ContentItem {
  id Int [pk, increment]
  type ContentItemType [not null]
  videoLink String [not null]
  publicationDate DateTime [not null]
  created_at DateTime [default: `now()`, not null]
  updated_at DateTime [not null]
  person Person [not null]
  photos Photo [not null]
  Tag Tag [not null]
  ContentItemTranslation ContentItemTranslation [not null]
}

Table ContentItemTranslation {
  id Int [increment, not null]
  langCode String [not null]
  title String [not null]
  description String [not null]
  content String [not null]
  contentItem ContentItem [not null]
  contentItemId Int [not null]

  indexes {
    (langCode, contentItemId) [pk]
  }
}

Table Person {
  id Int [pk, increment]
  email String [unique, not null]
  hash String [not null]
  type EmployeePosition [not null]
  role Role [not null]
  created_at DateTime [default: `now()`, not null]
  updated_at DateTime [not null]
  avatar Photo
  professional_interests ProfessionalInterest [not null]
  awards Award [not null]
  news News [not null]
  education Education
  contentItemId ContentItem [not null]
  partnerProfile PartnerProfile
  practiceManagerProfile PracticeManagerProfile
  employeeProfile EmployeeProfile
  PersonTranslation PersonTranslation [not null]
}

Table PartnerProfile {
  id Int [not null]
  quote_ru String [not null]
  quote_en String [not null]
  person Person [not null]
  personId Int [pk]

  indexes {
    (personId) [pk]
  }
}

Table PracticeManagerProfile {
  id Int [increment, not null]
  person Person [not null]
  personId Int [pk]

  indexes {
    (personId) [pk]
  }
}

Table EmployeeProfile {
  id Int [increment, not null]
  person Person [not null]
  personId Int [pk]

  indexes {
    (personId) [pk]
  }
}

Table EducationLevel {
  id Int [pk, increment]
  title_ru String [not null]
  title_en String [not null]
  Education Education [not null]
}

Table Education {
  id Int [increment, not null]
  study_year DateTime [not null]
  graduation_year DateTime [not null]
  university String [not null]
  specialty String [not null]
  qualification String [not null]
  educationLevel EducationLevel [not null]
  educationLevelId Int [not null]
  person Person [not null]
  personId Int [unique, not null]

  indexes {
    (personId, educationLevelId) [pk]
  }
}

Table ProfessionalInterest {
  id Int [pk, increment]
  title_ru String [not null]
  title_en String [not null]
  person Person [not null]
  personId Int [not null]
}

Table Award {
  id Int [pk, increment]
  title_ru String [not null]
  title_en String [not null]
  person Person [not null]
  personId Int [not null]
}

Table News {
  id Int [pk, increment]
  title_ru String [not null]
  title_en String [not null]
  text_ru String [not null]
  text_en String [not null]
  person Person [not null]
  person_id Int [not null]
}

Table CategoryTranslation {
  id Int [increment, not null]
  langCode String [not null]
  categoryTranslationType CategoryTranslationType [not null]
  title String [not null]
  text String [not null]
  areaProfile Area
  areaId Int
  practiceProfile Practice
  practiceId Int
  serviceProfile Service
  serviceId Int

  indexes {
    (langCode, categoryTranslationType) [pk]
  }
}

Table PersonTranslation {
  id Int [increment, not null]
  langCode String [not null]
  firstName String [not null]
  surnameName String [not null]
  middleName String [not null]
  description String [not null]
  smallDescription String [not null]
  status String [not null]
  position String [not null]
  personProfile Person [not null]
  person_id Int [not null]

  indexes {
    (langCode, person_id) [pk]
  }
}

Enum Role {
  ADMIN
  EMPLOYEE
  REPORTER
}

Enum EmployeePosition {
  Partner
  PracticeManager
  Employee
}

Enum ContentItemType {
  CASE
  PUBLISH
}

Enum PhotoType {
  CONTENT
  AVATAR
}

Enum CategoryTranslationType {
  Area
  Practice
  Service
}

Ref: Tag.practiceId > Practice.id [delete: Cascade]

Ref: Photo.contentItemId > ContentItem.id [delete: Cascade]

Ref: Photo.personId - Person.id [delete: Cascade]

Ref: ContentItemTranslation.contentItemId > ContentItem.id [delete: Cascade]

Ref: PartnerProfile.personId - Person.id

Ref: PracticeManagerProfile.personId - Person.id

Ref: EmployeeProfile.personId - Person.id

Ref: Education.educationLevelId > EducationLevel.id [delete: Cascade]

Ref: Education.personId - Person.id [delete: Cascade]

Ref: ProfessionalInterest.personId > Person.id [delete: Cascade]

Ref: Award.personId > Person.id [delete: Cascade]

Ref: News.person_id > Person.id [delete: Cascade]

Ref: CategoryTranslation.areaId > Area.id [delete: Cascade]

Ref: CategoryTranslation.practiceId > Practice.id [delete: Cascade]

Ref: CategoryTranslation.serviceId > Service.id [delete: Cascade]

Ref: PersonTranslation.person_id > Person.id